<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Gia pháº£ dÃ²ng há» LÃª ÄÃ¬nh</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://d3js.org/d3.v7.min.js"></script>

<style>
body{
  font-family:"Times New Roman",serif;
  margin:0;
  padding:30px;
  background:url("https://tranhnhatthanh.vn/wp-content/uploads/2024/07/tranh-lang-que-viet-nam-xua-14.jpg")
    no-repeat center center fixed;
  background-size:cover;
}
.main{
  background:rgba(255,255,255,0.95);
  max-width:1200px;
  margin:auto;
  padding:30px 40px;
  box-shadow:0 0 30px rgba(0,0,0,0.4);
}
h1{text-align:center}
.menu{text-align:center;margin:20px 0}
.menu button{padding:6px 16px;font-weight:bold}
.section{display:none}
.section.active{display:block}
#form{border:1px solid #ccc;padding:15px;background:#f9f9f9}
label{display:inline-block;width:180px}
input,select{width:280px;margin-bottom:6px}
.wrapper{height:70vh;overflow:auto;border:1px solid #ccc}
svg{width:4000px;height:2500px}
.node rect{fill:#fff;stroke:#333;rx:6;ry:6}
.link{fill:none;stroke:#999}
</style>
</head>

<body>
<div class="main">
<h1>GIA PHáº¢ DÃ’NG Há»Œ LÃŠ ÄÃŒNH</h1>

<div class="menu">
  <button onclick="showPage('home')">ğŸ  Trang chá»§</button>
  <button onclick="showPage('manage')">âœï¸ Quáº£n lÃ½</button>
  <button onclick="showPage('tree')">ğŸŒ³ Gia pháº£</button>
</div>

<!-- TRANG CHá»¦ -->
<div id="home" class="section active">
  <div class="intro">
    <h2 style="text-align:center">Lá»œI GIá»šI THIá»†U</h2>

    <p>
      Gia pháº£ lÃ  sá»£i dÃ¢y ná»‘i liá»n cÃ¡c tháº¿ há»‡, lÃ  nÆ¡i lÆ°u giá»¯ cá»™i nguá»“n,
      cÃ´ng Ä‘á»©c tá»• tiÃªn vÃ  truyá»n thá»‘ng cá»§a dÃ²ng há» qua bao Ä‘á»i.
    </p>

    <p>
      DÃ²ng há» LÃª chÃºng ta láº¥y <b>Thá»§y tá»• lÃ  Cá»¥ LÃª ÄÃ¬nh Cai</b>,
      con trai cá»§a <b>HoÃ ng thÃ¢n LÃª Duy Máº­t</b>, lÃ m gá»‘c.
      Tá»« Thá»§y tá»•, cÃ¡c Ä‘á»i con chÃ¡u tiáº¿p ná»‘i sinh sÃ´i, láº­p nghiá»‡p,
      Ä‘Ã³ng gÃ³p cho gia Ä‘Ã¬nh, quÃª hÆ°Æ¡ng vÃ  Ä‘áº¥t nÆ°á»›c.
    </p>

    <p>
      Tráº£i qua thá»i gian, nhiá»u tÆ° liá»‡u gia pháº£ báº±ng giáº¥y Ä‘Ã£ mai má»™t,
      phÃ¢n tÃ¡n hoáº·c khÃ³ báº£o quáº£n. Viá»‡c xÃ¢y dá»±ng Gia pháº£ Ä‘iá»‡n tá»­ nháº±m:
    </p>

    <ul>
      <li>GÃ¬n giá»¯ Ä‘áº§y Ä‘á»§, chÃ­nh xÃ¡c thÃ´ng tin cÃ¡c tháº¿ há»‡ trong dÃ²ng há»</li>
      <li>GiÃºp con chÃ¡u dá»… dÃ ng tra cá»©u cá»™i nguá»“n, vai váº¿, thá»© báº­c</li>
      <li>Thuáº­n tiá»‡n trong viá»‡c tá»• chá»©c giá»— tá»•, giá»— chi, tÆ°á»Ÿng nhá»› tá»• tiÃªn</li>
      <li>Káº¿t ná»‘i con chÃ¡u trong vÃ  ngoÃ i nÆ°á»›c, dÃ¹ á»Ÿ báº¥t cá»© nÆ¡i Ä‘Ã¢u</li>
    </ul>

    <p>
      Gia pháº£ Ä‘iá»‡n tá»­ nÃ y Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn tinh tháº§n
      <b>tÃ´n trá»ng lá»‹ch sá»­ â€“ giá»¯ gÃ¬n truyá»n thá»‘ng â€“ truyá»n láº¡i cho mai sau</b>.
      Má»i thÃ´ng tin Ä‘á»u Ä‘Æ°á»£c Ban gia pháº£ rÃ  soÃ¡t, bá»• sung vÃ  cáº­p nháº­t cáº©n trá»ng.
    </p>

    <p>
      Nguyá»‡n mong con chÃ¡u Ä‘á»i sau, khi xem gia pháº£,
      luÃ´n nhá»› Ä‘áº¿n cÃ´ng lao tá»• tiÃªn, giá»¯ gÃ¬n ná» náº¿p gia phong,
      Ä‘oÃ n káº¿t yÃªu thÆ°Æ¡ng, cÃ¹ng nhau lÃ m ráº¡ng danh dÃ²ng há».
    </p>

    <p>
      Gia pháº£ nÃ y lÃ  tÃ i sáº£n chung cá»§a toÃ n thá»ƒ dÃ²ng há»,
      Ä‘Æ°á»£c lÆ°u giá»¯ vÃ  sá»­ dá»¥ng cho má»¥c Ä‘Ã­ch tÆ°á»Ÿng nhá»› tá»• tiÃªn
      vÃ  giÃ¡o dá»¥c truyá»n thá»‘ng cho cÃ¡c tháº¿ há»‡ mai sau.
    </p>

    <div class="footer">Ban Gia pháº£ dÃ²ng há» LÃª ÄÃ¬nh</div>
  </div>
</div>

<!-- QUáº¢N LÃ -->
<div id="manage" class="section">
<div id="form">
<b>ThÃªm / chá»‰nh sá»­a thÃ nh viÃªn</b><br><br>

<label>ThÃ nh viÃªn Ä‘ang sá»­a:</label>
<select id="editSelect"></select><br>

<label>Cha (Ä‘á»ƒ sinh con):</label>
<select id="parentSelect"></select><br>

<label>Há» tÃªn:</label>
<input id="nameInput"><br>

<label>Con thá»© máº¥y:</label>
<input id="orderInput" type="number"><br>

<label>NÄƒm sinh:</label>
<input id="birthInput"><br>

<label>QuÃª quÃ¡n:</label>
<input id="homeInput"><br>

<label>NgÃ y giá»—:</label>
<input id="deathInput"><br><br>

<button onclick="addPerson()">â• ThÃªm con</button>
<button onclick="updatePerson()">âœï¸ Cáº­p nháº­t</button>
</div>
</div>

<!-- CÃ‚Y -->
<div id="tree" class="section">
<div class="wrapper"><svg></svg></div>
</div>
</div>

<script>
function showPage(id){
 document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
 document.getElementById(id).classList.add('active');
}

/* ===== Dá»® LIá»†U ===== */
let data={
 id:1,
 name:"Thá»§y Tá»• â€“ LÃª ÄÃ¬nh Cai",
 doi:1,
 gio:"Giá»— Tá»•: 17 thÃ¡ng GiÃªng",
 children:[]
};
let idCounter=2;

/* ===== TIá»†N ÃCH ===== */
function allNodes(n,a=[]){
 a.push(n);
 (n.children||[]).forEach(c=>allNodes(c,a));
 return a;
}

/* ===== SELECT ===== */
function refreshSelects(){
 editSelect.innerHTML="";
 parentSelect.innerHTML="";
 allNodes(data).forEach(n=>{
   editSelect.add(new Option(n.name,n.id));
   parentSelect.add(new Option(n.name+" (Äá»i "+n.doi+")",n.id));
 });
 editSelect.value="";
}

/* ===== ADD ===== */
function addPerson(){
 let parent=allNodes(data).find(n=>n.id==parentSelect.value);
 if(!nameInput.value){alert("Nháº­p há» tÃªn");return;}
 parent.children.push({
   id:idCounter++,
   name:nameInput.value,
   doi:parent.doi+1,
   order:orderInput.value,
   birth:birthInput.value,
   home:homeInput.value,
   gio:deathInput.value,
   children:[]
 });
 clearForm();
 refreshSelects();
 draw();
}

/* ===== UPDATE ===== */
function updatePerson(){
 let id=Number(editSelect.value);
 if(!id){alert("Chá»n ngÆ°á»i cáº§n sá»­a");return;}
 if(id===1){alert("KhÃ´ng sá»­a Thá»§y Tá»•");return;}
 let p=allNodes(data).find(n=>n.id===id);
 p.name=nameInput.value;
 p.order=orderInput.value;
 p.birth=birthInput.value;
 p.home=homeInput.value;
 p.gio=deathInput.value;
 clearForm();
 refreshSelects();
 draw();
 alert("ÄÃ£ cáº­p nháº­t trá»±c tiáº¿p trÃªn cÃ¢y");
}

/* ===== FORM ===== */
function clearForm(){
 nameInput.value=orderInput.value=birthInput.value=homeInput.value=deathInput.value="";
 editSelect.value="";
}

/* ===== LOAD ===== */
editSelect.onchange=function(){
 let p=allNodes(data).find(n=>n.id==this.value);
 if(!p) return;
 nameInput.value=p.name;
 orderInput.value=p.order||"";
 birthInput.value=p.birth||"";
 homeInput.value=p.home||"";
 deathInput.value=p.gio||"";
};

/* ===== DRAW ===== */
function draw(){
 d3.select("svg").selectAll("*").remove();
 let g=d3.select("svg").append("g").attr("transform","translate(200,400)");
 let root=d3.hierarchy(data);
 d3.tree().nodeSize([110,260])(root);

 g.selectAll(".link")
  .data(root.links()).enter().append("path")
  .attr("class","link")
  .attr("d",d3.linkHorizontal().x(d=>d.y).y(d=>d.x));

 let node=g.selectAll(".node")
  .data(root.descendants()).enter().append("g")
  .attr("class","node")
  .attr("transform",d=>`translate(${d.y},${d.x})`);

 node.append("rect").attr("x",-110).attr("y",-45).attr("width",220).attr("height",90);
 node.append("text").attr("y",-20).attr("text-anchor","middle").text(d=>d.data.name);
 node.append("text").attr("y",-5).attr("text-anchor","middle")
   .text(d=>d.data.id==1?"Thá»§y Tá»•":"Äá»i "+d.data.doi+" â€“ Con "+d.data.order);
 node.append("text").attr("y",12).attr("text-anchor","middle").text(d=>d.data.gio||"");
}

refreshSelects();
draw();
</script>
</body>
</html>
