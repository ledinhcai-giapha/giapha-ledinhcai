<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Cây gia phả dòng họ Lê</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  body { font-family: "Times New Roman", serif; margin:0; padding:10px; }
  h1 { text-align:center; }
  svg { width:100%; height:90vh; }
  .link { fill:none; stroke:#999; stroke-width:1.5px; }
  .node rect { fill:#fff; stroke:#333; stroke-width:1.5px; rx:6; ry:6; }
  .node text { font-size:14px; pointer-events:none; text-anchor:middle; }
</style>
</head>
<body>

<h1>CÂY GIA PHẢ DÒNG HỌ LÊ</h1>

<svg></svg>

<script>
fetch("data-gia-pha.json")
.then(r => r.json())
.then(data => {
  const width = document.querySelector("svg").clientWidth;
  const height = document.querySelector("svg").clientHeight;

  const svg = d3.select("svg")
    .append("g")
    .attr("transform","translate(50,50)");

  const tree = d3.tree().size([height-100, width-200]);
  const root = d3.hierarchy(data);
  tree(root);

  svg.selectAll(".link")
    .data(root.links())
    .enter()
    .append("path")
    .attr("class","link")
    .attr("d", d3.linkHorizontal()
      .x(d => d.y)
      .y(d => d.x)
    );

  const node = svg.selectAll(".node")
    .data(root.descendants())
    .enter()
    .append("g")
    .attr("class","node")
    .attr("transform", d => `translate(${d.y},${d.x})`);

  node.append("rect")
    .attr("x",-70)
    .attr("y",-20)
    .attr("width",140)
    .attr("height",40);

  node.append("text")
    .attr("dy","0.35em")
    .text(d => d.data.name);
});
</script>

</body>
</html>
