<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Gia pháº£ dÃ²ng há» LÃª ÄÃ¬nh</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://d3js.org/d3.v7.min.js"></script>

<style>
body{
  font-family:"Times New Roman",serif;
  margin:0;
  padding:10px;
}
h1{text-align:center;}
button{margin:5px;padding:6px 10px;cursor:pointer}

.menu{text-align:center;margin-bottom:15px}
.menu button{font-weight:bold}

.section{display:none}
.section.active{display:block}

.intro{
  max-width:900px;
  margin:0 auto;
  line-height:1.8;
  font-size:18px;
}

.intro img{
  display:block;
  margin:20px auto;
  max-width:200px;
  border:2px solid #444;
}

.footer{
  margin-top:40px;
  text-align:right;
  font-weight:bold;
}

#form{
  border:1px solid #ccc;
  padding:10px;
  margin-bottom:10px;
  background:#f9f9f9;
}

.wrapper{
  width:100%;
  height:75vh;
  overflow:auto;
  border:1px solid #ccc;
}

svg{width:3000px;height:2000px}

.node rect{
  fill:#fff;
  stroke:#333;
  stroke-width:1.2px;
  rx:6; ry:6;
}
.link{
  fill:none;
  stroke:#999;
}
</style>
</head>

<body>

<h1>GIA PHáº¢ DÃ’NG Há»Œ LÃŠ ÄÃŒNH</h1>

<div class="menu">
  <button onclick="show('home')">ğŸ  Trang chá»§</button>
  <button onclick="show('manage')">âœï¸ Quáº£n lÃ½ gia pháº£</button>
  <button onclick="show('tree')">ğŸŒ³ Gia pháº£</button>
</div>

<!-- ===== TRANG CHá»¦ ===== -->
<div id="home" class="section active">
  <div class="intro">
    <img src="img/dai-dien.jpg" alt="áº¢nh Ä‘áº¡i diá»‡n dÃ²ng há»">

    <h2>Lá»œI GIá»šI THIá»†U</h2>

    <p>Gia pháº£ lÃ  sá»£i dÃ¢y ná»‘i liá»n cÃ¡c tháº¿ há»‡, lÃ  nÆ¡i lÆ°u giá»¯ cá»™i nguá»“n, cÃ´ng Ä‘á»©c tá»• tiÃªn vÃ  truyá»n thá»‘ng cá»§a dÃ²ng há» qua bao Ä‘á»i.</p>

    <p>DÃ²ng há» LÃª chÃºng ta láº¥y <b>Thá»§y tá»• lÃ  Cá»¥ LÃª ÄÃ¬nh Cai</b>, con trai cá»§a HoÃ ng thÃ¢n <b>LÃª Duy Máº­t</b>, lÃ m gá»‘c. Tá»« Thá»§y tá»•, cÃ¡c Ä‘á»i con chÃ¡u tiáº¿p ná»‘i sinh sÃ´i, láº­p nghiá»‡p, Ä‘Ã³ng gÃ³p cho gia Ä‘Ã¬nh, quÃª hÆ°Æ¡ng vÃ  Ä‘áº¥t nÆ°á»›c.</p>

    <p>Tráº£i qua thá»i gian, nhiá»u tÆ° liá»‡u gia pháº£ báº±ng giáº¥y Ä‘Ã£ mai má»™t, phÃ¢n tÃ¡n hoáº·c khÃ³ báº£o quáº£n. Viá»‡c xÃ¢y dá»±ng Gia pháº£ Ä‘iá»‡n tá»­ nháº±m:</p>

    <ul>
      <li>GÃ¬n giá»¯ Ä‘áº§y Ä‘á»§, chÃ­nh xÃ¡c thÃ´ng tin cÃ¡c tháº¿ há»‡ trong dÃ²ng há»</li>
      <li>GiÃºp con chÃ¡u dá»… dÃ ng tra cá»©u cá»™i nguá»“n, vai váº¿, thá»© báº­c</li>
      <li>Thuáº­n tiá»‡n trong viá»‡c tá»• chá»©c giá»— tá»•, giá»— chi, tÆ°á»Ÿng nhá»› tá»• tiÃªn</li>
      <li>Káº¿t ná»‘i con chÃ¡u trong vÃ  ngoÃ i nÆ°á»›c</li>
    </ul>

    <p>Gia pháº£ Ä‘iá»‡n tá»­ nÃ y Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn tinh tháº§n tÃ´n trá»ng lá»‹ch sá»­ â€“ giá»¯ gÃ¬n truyá»n thá»‘ng â€“ truyá»n láº¡i cho mai sau.</p>

    <p>Nguyá»‡n mong con chÃ¡u Ä‘á»i sau, khi xem gia pháº£, luÃ´n nhá»› Ä‘áº¿n cÃ´ng lao tá»• tiÃªn, giá»¯ gÃ¬n ná» náº¿p gia phong, Ä‘oÃ n káº¿t yÃªu thÆ°Æ¡ng.</p>

    <p>Gia pháº£ nÃ y lÃ  tÃ i sáº£n chung cá»§a toÃ n thá»ƒ dÃ²ng há», Ä‘Æ°á»£c lÆ°u giá»¯ vÃ  sá»­ dá»¥ng cho má»¥c Ä‘Ã­ch tÆ°á»Ÿng nhá»› tá»• tiÃªn vÃ  giÃ¡o dá»¥c truyá»n thá»‘ng.</p>

    <div class="footer">Ban Gia pháº£ dÃ²ng há» LÃª ÄÃ¬nh</div>
  </div>
</div>

<!-- ===== QUáº¢N LÃ ===== -->
<div id="manage" class="section">
  <div id="form">
    <label>Cha:</label>
    <select id="parentSelect"></select><br>

    <label>TÃªn:</label>
    <input id="nameInput"><br>

    <label>Thá»© tá»±:</label>
    <input id="orderInput" type="number" min="1"><br>

    <button onclick="addPerson()">â• ThÃªm</button>
  </div>
</div>

<!-- ===== CÃ‚Y GIA PHáº¢ ===== -->
<div id="tree" class="section">
  <div class="wrapper">
    <svg></svg>
  </div>
</div>

<script>
function show(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* ===== DATA ===== */
let data={
  id:1,
  name:"LÃª ÄÃ¬nh Cai",
  doi:1,
  isRoot:true,
  children:[]
};
let idCounter=2;

function allNodes(n,a=[]){
  a.push(n);
  (n.children||[]).forEach(c=>allNodes(c,a));
  return a;
}

function refreshSelect(){
  parentSelect.innerHTML="";
  allNodes(data).forEach(n=>{
    let o=document.createElement("option");
    o.value=n.id;
    o.text=n.name+" (Äá»i "+n.doi+")";
    parentSelect.appendChild(o);
  });
}

function addPerson(){
  let p=allNodes(data).find(n=>n.id==parentSelect.value);
  if(!p.children)p.children=[];
  p.children.push({
    id:idCounter++,
    name:nameInput.value,
    doi:p.doi+1,
    order:orderInput.value
  });
  nameInput.value="";orderInput.value="";
  refreshSelect(); draw();
}

function draw(){
  d3.select("svg").selectAll("*").remove();
  let g=d3.select("svg").append("g").attr("transform","translate(150,400)");
  let root=d3.hierarchy(data);
  d3.tree().nodeSize([80,220])(root);

  g.selectAll(".link")
    .data(root.links())
    .enter().append("path")
    .attr("class","link")
    .attr("d",d3.linkHorizontal().x(d=>d.y).y(d=>d.x));

  let node=g.selectAll(".node")
    .data(root.descendants())
    .enter().append("g")
    .attr("class","node")
    .attr("transform",d=>`translate(${d.y},${d.x})`);

  node.append("rect").attr("x",-70).attr("y",-28).attr("width",140).attr("height",56);

  node.append("text").attr("y",-6).attr("text-anchor","middle")
    .text(d=>d.data.name);

  node.append("text").attr("y",14).attr("text-anchor","middle")
    .text(d=>d.data.isRoot?"Thá»§y Tá»•":("Äá»i "+d.data.doi+" â€“ Con thá»© "+d.data.order));
}

refreshSelect(); draw();
</script>

</body>
</html>
