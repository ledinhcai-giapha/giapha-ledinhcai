<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Gia pháº£ dÃ²ng há» LÃª ÄÃ¬nh</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://d3js.org/d3.v7.min.js"></script>

<style>
body{
  font-family:"Times New Roman",serif;
  margin:0;padding:10px;
}
h1{text-align:center}
nav{text-align:center;margin-bottom:15px}
nav button{margin:0 5px}
section{display:none}
section.active{display:block}
#intro{max-width:900px;margin:auto;line-height:1.7}

#form{
  border:1px solid #ccc;
  padding:10px;
  margin-bottom:10px;
  background:#f9f9f9;
}
label{display:inline-block;width:100px}
input,select{margin:4px 0}

.wrapper{
  width:100%;
  height:75vh;
  overflow:auto;
  border:1px solid #ccc;
}
svg{width:3000px;height:2000px}

.link{fill:none;stroke:#999}
.node rect{fill:#fff;stroke:#333;rx:6;ry:6}
.name{text-anchor:middle;font-weight:bold;font-size:13px}
.doi{text-anchor:middle;font-size:11px}
.note{text-anchor:middle;font-size:10px;font-style:italic}
</style>
</head>

<body>

<h1>GIA PHáº¢ DÃ’NG Há»Œ LÃŠ ÄÃŒNH</h1>

<nav>
  <button onclick="show('home')">ğŸ  Trang chá»§</button>
  <button onclick="show('manage')">âœï¸ Quáº£n lÃ½ gia pháº£</button>
</nav>

<!-- TRANG CHá»¦ -->
<section id="home" class="active">
<div id="intro">
<h2>Lá»œI GIá»šI THIá»†U</h2>
<p>
Gia pháº£ lÃ  sá»£i dÃ¢y ná»‘i liá»n cÃ¡c tháº¿ há»‡, lÃ  nÆ¡i lÆ°u giá»¯ cá»™i nguá»“n, cÃ´ng Ä‘á»©c tá»• tiÃªn
vÃ  truyá»n thá»‘ng cá»§a dÃ²ng há» qua bao Ä‘á»i.
</p>
<p>
DÃ²ng há» LÃª chÃºng ta láº¥y <b>Thá»§y tá»• lÃ  Cá»¥ LÃª ÄÃ¬nh Cai</b>,
con trai cá»§a HoÃ ng thÃ¢n <b>LÃª Duy Máº­t</b>, lÃ m gá»‘c.
Tá»« Thá»§y tá»•, cÃ¡c Ä‘á»i con chÃ¡u tiáº¿p ná»‘i sinh sÃ´i, láº­p nghiá»‡p,
Ä‘Ã³ng gÃ³p cho gia Ä‘Ã¬nh, quÃª hÆ°Æ¡ng vÃ  Ä‘áº¥t nÆ°á»›c.
</p>
<p>
Tráº£i qua thá»i gian, nhiá»u tÆ° liá»‡u gia pháº£ báº±ng giáº¥y Ä‘Ã£ mai má»™t,
phÃ¢n tÃ¡n hoáº·c khÃ³ báº£o quáº£n. Viá»‡c xÃ¢y dá»±ng Gia pháº£ Ä‘iá»‡n tá»­ nháº±m:
</p>
<ul>
<li>GÃ¬n giá»¯ Ä‘áº§y Ä‘á»§, chÃ­nh xÃ¡c thÃ´ng tin cÃ¡c tháº¿ há»‡ trong dÃ²ng há»</li>
<li>GiÃºp con chÃ¡u tra cá»©u cá»™i nguá»“n, vai váº¿, thá»© báº­c</li>
<li>Thuáº­n tiá»‡n tá»• chá»©c giá»— tá»•, giá»— chi, tÆ°á»Ÿng nhá»› tá»• tiÃªn</li>
<li>Káº¿t ná»‘i con chÃ¡u trong vÃ  ngoÃ i nÆ°á»›c</li>
</ul>
<p>
Gia pháº£ Ä‘iá»‡n tá»­ nÃ y Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn tinh tháº§n
<b>tÃ´n trá»ng lá»‹ch sá»­ â€“ giá»¯ gÃ¬n truyá»n thá»‘ng â€“ truyá»n láº¡i cho mai sau</b>.
</p>
<p>
Nguyá»‡n mong con chÃ¡u Ä‘á»i sau luÃ´n nhá»› cÃ´ng lao tá»• tiÃªn,
giá»¯ gÃ¬n ná» náº¿p gia phong, Ä‘oÃ n káº¿t yÃªu thÆ°Æ¡ng,
cÃ¹ng nhau lÃ m ráº¡ng danh dÃ²ng há».
</p>
<p><b>
Gia pháº£ nÃ y lÃ  tÃ i sáº£n chung cá»§a toÃ n thá»ƒ dÃ²ng há»,
dÃ¹ng cho má»¥c Ä‘Ã­ch tÆ°á»Ÿng nhá»› tá»• tiÃªn vÃ  giÃ¡o dá»¥c truyá»n thá»‘ng.
</b></p>
</div>
</section>

<!-- QUáº¢N LÃ -->
<section id="manage">
<div id="form">
<label>Cha:</label>
<select id="parent"></select><br>
<label>TÃªn:</label>
<input id="name"><br>
<label>Thá»© tá»±:</label>
<input id="order" type="number" min="1"><br>
<button onclick="add()">â• ThÃªm</button>
</div>

<div class="wrapper">
<svg></svg>
</div>
</section>

<script>
function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* ===== DATA ===== */
let data = JSON.parse(localStorage.getItem("giapha")) || {
  id:1,
  name:"LÃª ÄÃ¬nh Cai",
  doi:1,
  role:"Thá»§y tá»•",
  children:[]
};
let idc = Date.now();

function all(n,a=[]){a.push(n);(n.children||[]).forEach(c=>all(c,a));return a}

function save(){localStorage.setItem("giapha",JSON.stringify(data))}

/* ===== FORM ===== */
function refresh(){
  parent.innerHTML="";
  all(data).forEach(n=>{
    let o=document.createElement("option");
    o.value=n.id;
    o.text=`${n.name} (${n.role||"Äá»i "+n.doi})`;
    parent.appendChild(o);
  });
}

/* ===== ADD ===== */
function add(){
  let p=all(data).find(n=>n.id==parent.value);
  if(!name.value)return alert("Nháº­p tÃªn");
  p.children.push({
    id:++idc,
    name:name.value,
    doi:p.doi+1,
    role:`Con thá»© ${order.value||"?"}`,
    children:[]
  });
  name.value="";order.value="";
  save();refresh();draw();
}

/* ===== DRAW ===== */
function draw(){
  d3.select("svg").selectAll("*").remove();
  let g=d3.select("svg").append("g").attr("transform","translate(150,500)");
  let r=d3.hierarchy(data);
  d3.tree().nodeSize([90,220])(r);

  g.selectAll(".link")
    .data(r.links())
    .enter().append("path")
    .attr("class","link")
    .attr("d",d3.linkHorizontal().x(d=>d.y).y(d=>d.x));

  let n=g.selectAll(".node")
    .data(r.descendants())
    .enter().append("g")
    .attr("class","node")
    .attr("transform",d=>`translate(${d.y},${d.x})`);

  n.append("rect").attr("x",-70).attr("y",-32).attr("width",140).attr("height",64);
  n.append("text").attr("class","name").attr("y",-8).text(d=>d.data.name);
  n.append("text").attr("class","doi").attr("y",10).text(d=>d.data.role||("Äá»i "+d.data.doi));
}

refresh();draw();
</script>

</body>
</html>
